# Parallel Upload System Configuration
# Copy this to your .env file and adjust values as needed

# =============================================================================
# PARALLEL UPLOAD SYSTEM FEATURE FLAGS
# =============================================================================

# Enable/disable parallel upload system (set to True to enable)
ENABLE_PARALLEL_UPLOADS=False

# Chunk size configuration (in MB)
PARALLEL_UPLOAD_CHUNK_SIZE_MB=16

# Concurrency limits
PARALLEL_UPLOAD_MAX_CONCURRENT_CHUNKS=8
PARALLEL_UPLOAD_MAX_CONCURRENT_USERS=20

# Memory management
PARALLEL_UPLOAD_MAX_MEMORY_PERCENT=80.0

# =============================================================================
# PERFORMANCE TUNING (ADVANCED)
# =============================================================================

# Buffer pool configuration
BUFFER_POOL_MAX_BUFFERS=50
BUFFER_POOL_DEFAULT_SIZE_MB=16
BUFFER_POOL_MAX_SIZE_MB=32

# HTTP client configuration
HTTP_MAX_CONNECTIONS=50
HTTP_KEEPALIVE_CONNECTIONS=20
HTTP_KEEPALIVE_EXPIRY=30

# =============================================================================
# MONITORING & DEBUGGING
# =============================================================================

# Enable detailed logging for parallel uploads
PARALLEL_UPLOAD_DEBUG_LOGGING=False

# Memory monitoring interval (seconds)
MEMORY_MONITOR_INTERVAL=5

# Progress update frequency (seconds)
PROGRESS_UPDATE_INTERVAL=1

# =============================================================================
# ROLLBACK CONFIGURATION
# =============================================================================

# Fallback to sequential upload if parallel fails
PARALLEL_UPLOAD_FALLBACK_TO_SEQUENTIAL=True

# Graceful degradation threshold (failed chunks percentage)
PARALLEL_UPLOAD_FAILURE_THRESHOLD=10.0

# =============================================================================
# NOTES & RECOMMENDATIONS
# =============================================================================

# For 4GB RAM server:
# - PARALLEL_UPLOAD_MAX_CONCURRENT_USERS=20 (max)
# - PARALLEL_UPLOAD_MAX_MEMORY_PERCENT=80.0 (max)
# - PARALLEL_UPLOAD_CHUNK_SIZE_MB=16 (optimal)

# For production use:
# - Start with ENABLE_PARALLEL_UPLOADS=False
# - Test thoroughly with small files first
# - Monitor memory usage during testing
# - Gradually increase limits based on performance

# For development/testing:
# - Use smaller chunk sizes (8MB)
# - Reduce concurrent limits
# - Enable debug logging
